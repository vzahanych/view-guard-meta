# User VM API Configuration for Docker Compose (PoC)
user_vm_api:
  orchestrator:
    log_level: "info"
    log_format: "text"
    data_dir: "/app/data"
    config_file: ""

  wireguard_server:
    enabled: true
    interface: "wg0"
    listen_port: 51820
    # WireGuard config file generated by wg-setup service
    config_path: "/etc/wireguard/wg0.conf"

  event_cache:
    enabled: true
    database_path: "/app/data/events.db"
    retention_days: 30
    cleanup_interval: 24h

  stream_relay:
    enabled: true
    listen_addr: ":8080"
    # Token validation disabled for PoC (no SaaS)

  storage_sync:
    enabled: true
    provider: "s3"  # MinIO for PoC (using AWS Go SDK)
    provider_config:
      endpoint: "http://minio:9000"
      # Each camera gets its own bucket: camera-{camera_id}
      bucket_prefix: "camera-"  # Buckets: camera-rtsp-192.168.1.100, camera-usb-usb-3-9, etc.
      region: "us-east-1"
      access_key_id: "minioadmin"
      secret_access_key: "minioadmin"
      use_ssl: false
    quota_gb_per_camera: 10  # Quota per camera bucket
    retention_days: 90

  # Dataset Storage Service
  dataset_storage:
    enabled: true
    datasets_path: "/app/data/datasets"
    organization_by_label: true

  # Model Catalog & Distribution Service
  model_catalog:
    enabled: true
    models_path: "/app/data/models"
    distribution_enabled: true

  # Baseline Inventory Service
  baseline_inventory:
    enabled: true
    inventory_path: "/app/data/baselines"

  # Deep Analysis Service
  deep_analysis:
    enabled: true
    python_ai_service_url: "http://python-ai-service:8000"
    inference_timeout: 30s

  # Anomaly Reasoning Service
  anomaly_reasoning:
    enabled: true
    correlation_window: 5m
    baseline_comparison_enabled: true

  # Risk Scoring Service
  risk_scoring:
    enabled: true
    severity_threshold: 0.7
    explanation_enabled: true

  # Python AI Service configuration
  python_ai_service:
    enabled: true
    url: "http://python-ai-service:8000"
    timeout: 30s
    retry_attempts: 3

  telemetry_aggregator:
    enabled: true
    aggregation_interval: 1m
    forward_interval: 5m

  # Management Server disabled for PoC
  management_server:
    enabled: false
    endpoint: ""
    mtls: false

log:
  level: "info"
  format: "text"
  output: "stdout"

